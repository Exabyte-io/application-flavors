isDefault: true
hasAdvancedComputeOptions: true
postProcessors:
  - remove_non_zero_weight_kpoints
monitors:
  - standard_output
  - convergence_ionic
  - convergence_electronic
results:
  - atomic_forces
  - band_gaps
  - charge_density_profile
  - density_of_states
  - fermi_energy
  - final_structure
  - magnetic_moments
  - potential_profile
  - pressure
  - reaction_energy_barrier
  - reaction_energy_profile
  - stress_tensor
  - total_energy
  - total_energy_contributions
  - total_force
flavors:
  pw_scf:
    isDefault: true
    input:
      - name: pw_scf
        fileName: pw.in
    results:
      - atomic_forces
      - fermi_energy
      - pressure
      - stress_tensor
      - total_energy
      - total_energy_contributions
      - total_force
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_scf:
        !include 'executables/espresso/staticContext/pw.x.yml#/pw_scf'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values


  pw_scf_bands_hse:
    input:
      - name: pw_scf_bands_hse
        fileName: pw.in

    results:
      - total_energy
      - total_energy_contributions
      - pressure
      - fermi_energy
      - atomic_forces
      - total_force
      - stress_tensor
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
      - name: QGridFormDataManager
      - name: ExplicitKPathFormDataManager
    staticContext:
      pw_scf_bands_hse:
        !include 'executables/espresso/staticContext/pw.x.yml#/pw_scf_bands_hse'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - system.input_dft
      - system.nqx
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_scf_hse:
    input:
      - name: pw_scf_hse
        fileName: pw.in
    results:
      - atomic_forces
      - band_gaps
      - fermi_energy
      - pressure
      - stress_tensor
      - total_energy
      - total_energy_contributions
      - total_force
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_scf_hse:
        !include 'executables/espresso/staticContext/pw.x.yml#/pw_scf_hse'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.ecutfock
      - system.occupations
      - system.degauss
      - system.input_dft
      - system.nqx
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_scf_dft_u:
    input:
      - name: pw_scf_dft_u
        fileName: pw.in
    results:
      - atomic_forces
      - band_gaps
      - fermi_energy
      - pressure
      - stress_tensor
      - total_energy
      - total_energy_contributions
      - total_force
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    supportedApplicationVersions:
      - '7.2'
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
      - name: HubbardContextManager
    staticContext:
      pw_scf_dft_u:
        !include 'executables/espresso/staticContext/pw.x.yml#/pw_scf_dft_u'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values
      - hubbard.card_option
      - hubbard.values

  pw_esm:
    input:
      - name: pw_esm
        fileName: pw.in
    results:
      - total_energy
      - total_energy_contributions
      - pressure
      - fermi_energy
      - atomic_forces
      - total_force
      - stress_tensor
      - potential_profile
      - charge_density_profile
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
      - name: BoundaryConditionsFormDataManager
    staticContext:
      pw_esm: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_esm'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - system.assume_isolated
      - system.esm_bc
      - system.fcp_mu
      - system.esm_w
      - system.esm_efield
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_esm_relax:
    input:
      - name: pw_esm_relax
        fileName: pw.in
    results:
      - total_energy
      - total_energy_contributions
      - pressure
      - fermi_energy
      - atomic_forces
      - total_force
      - stress_tensor
      - potential_profile
      - charge_density_profile
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
      - name: BoundaryConditionsFormDataManager
    staticContext:
      pw_esm_relax: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_esm_relax'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - system.assume_isolated
      - system.esm_bc
      - system.fcp_mu
      - system.esm_w
      - system.esm_efield
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_nscf:
    input:
      - name: pw_nscf
        fileName: pw.in
    results:
      - fermi_energy
      - band_gaps
    monitors:
      - standard_output
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_nscf: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_nscf'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.nosym
      - system.noinv
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_bands:
    input:
      - name: pw_bands
        fileName: pw.in
    monitors:
      - standard_output
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KPathFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_bands: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_bands'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_relax:
    input:
      - name: pw_relax
        fileName: pw.in
    monitors:
      - standard_output
      - convergence_electronic
      - convergence_ionic
    results:
      - total_energy
      - fermi_energy
      - pressure
      - atomic_forces
      - total_force
      - stress_tensor
      - final_structure
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_relax: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_relax'
    requiredKeys:
      - control.calculation
      - control.nstep
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_vc-relax:
    input:
      - name: pw_vc_relax
        fileName: pw.in
    monitors:
      - standard_output
      - convergence_electronic
      - convergence_ionic
    results:
      - total_energy
      - fermi_energy
      - pressure
      - atomic_forces
      - total_force
      - stress_tensor
      - final_structure
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: KGridFormDataManager
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_vc_relax: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_vc-relax'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values

  pw_scf_kpt_conv:
    input:
      - name: pw_scf_kpt_conv
        fileName: pw.in
    results:
      - total_energy
      - fermi_energy
      - pressure
      - atomic_forces
      - total_force
      - stress_tensor
    monitors:
      - standard_output
      - convergence_electronic
    applicationName: espresso
    executableName: pw.x
    contextProviders:
      - name: QEPWXInputDataManager
      - name: PlanewaveCutoffDataManager
    staticContext:
      pw_scf_kpt_conv: !include
        'executables/espresso/staticContext/pw.x.yml#/pw_scf_kpt_conv'
    requiredKeys:
      - control.calculation
      - control.title
      - control.verbosity
      - control.restart_mode
      - control.wf_collect
      - control.tstress
      - control.tprnfor
      - control.outdir
      - control.wfcdir
      - control.prefix
      - control.pseudo_dir
      - system.ibrav
      - system.nat
      - system.ntyp
      - system.ecutwfc
      - system.ecutrho
      - system.occupations
      - system.degauss
      - electrons.diagonalization
      - electrons.diago_david_ndim
      - electrons.diago_full_acc
      - electrons.mixing_beta
      - electrons.startingwfc
      - atomic_species.values
      - atomic_positions.card_option
      - atomic_positions.values
      - cell_parameters.card_option
      - cell_parameters.values
      - k_points.card_option
      - k_points.values
